<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Aegis: AI Race Strategist - Las Vegas Demo</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="rain-container"></div>
    <div class="logo">
         <img src="logo.jpg" alt="Aegis AI Race Strategist Logo">
     </div>

    <h1>Aegis: AI Race Strategist</h1>

    <div class="simulation-area">
        <svg id="track-svg" width="800" height="500" viewBox="785 -350 400 400">
             <path id="track-path" d="m 948.33209,-96.744437 c -22.0005,-0.116043 -28.05048,-0.254152 -31.59767,-0.721328 -9.76073,-1.285526 -20.14612,-4.823035 -34.12863,-11.625025 -4.51741,-2.19754 -13.15083,-6.74215 -23.43286,-12.33504 -4.21256,-2.29139 -9.22803,-5.50279 -18.57997,-11.89669 -9.43913,-6.45351 -13.80525,-8.78395 -18.81464,-10.04234 -2.10989,-0.53001 -3.3475,-1.34637 -3.3475,-2.20792 0,-0.9536 2.58018,-11.64441 3.83875,-15.90546 1.71157,-5.795 2.81779,-7.73791 5.87726,-10.32274 2.98423,-2.52129 7.1339,-4.56235 14.37001,-7.0681 10.75412,-3.72401 20.06687,-9.95018 22.68704,-15.16788 1.48043,-2.94799 2.32827,-6.7566 2.87594,-12.91899 0.1185,-1.33411 0.20376,-10.15852 0.24576,-25.47404 0.23557,-28.25503 -0.35528,-26.72574 0.95093,-25.15147 -1.69081,-0.77595 -0.0453,-2.34311 4.56641,0.62633 3.61375,2.36786 7.18037,3.76794 8.32184,4.03054 2.50446,0.57621 5.09311,-0.6981 5.66754,-4.60012 0.37782,-1.53049 1.73086,-2.0305 5.50324,-2.03355 2.61516,-0.002 3.4415,0.086 6.43228,0.68552 9.02018,1.80827 16.02436,7.69695 18.43856,15.50197 0.9827,3.17721 0.98931,3.27264 1.14113,16.46836 0.0769,6.67757 0.19041,12.44597 0.2523,12.81867 0.24763,1.49114 0.9126,2.17176 2.34737,2.40283 0.7095,0.11425 6.50591,0.0629 19.17123,-0.16972 99.96599,-1.83635 109.14069,-2.02513 111.96749,-2.30377 2.5325,-0.24964 2.6436,0.12695 5.0313,-0.65878 3.5157,-1.15685 5.9017,-2.5175 8.1053,-4.62196 3.7572,-3.58831 4.6939,-6.75757 3.2456,-10.98137 -0.9282,-2.70681 -1.6315,-3.92021 -4.768,-9.65451 -2.3301,-4.25995 -2.5979,-5.00689 -2.8715,-6.22758 -0.5936,-2.64886 0.089,-5.14951 0.895,-6.55629 2.2853,-2.84063 5.7973,-3.56946 8.0285,-1.86873 2.3794,2.00528 2.3162,1.5128 13.7856,15.54226 5.8661,7.82763 11.0638,14.84524 11.5505,15.59468 1.7517,2.69696 2.8858,5.39776 3.5766,8.51685 0.365,1.64795 0.3682,1.77288 0.3385,13.17603 -0.026,10.02212 -0.987,42.17506 -0.8626,81.48428 0.023,7.14109 0.076,4.86675 -0.7675,6.86759 -0.1506,0.35717 -5.205,5.14146 -5.9644,5.47726 -0.6276,0.36659 -1.2479,0.8294 -1.3783,1.02849 -0.688,0.62528 -1.9345,2.6451 -2.0212,4.30662 -0.1094,2.09759 0.036,4.683962 -0.8594,5.136437 -0.585,0.295612 1.8224,-0.0119 -12.7742,0.550944 -9.243,0.356409 -33.9042,0.156102 -54.7856,0.211389 -20.88129,0.05528 -40.72163,0.123487 -44.08969,0.151555 -3.36786,0.02811 -16.04373,-0.0013 -28.16832,-0.06516 z m 122.00651,-1.452023 c 12.6924,-0.09741 16.9254,-0.358096 17.1672,-0.45001 0.5366,-0.204025 0.2581,-2.62881 0.3576,-4.65462 0.136,-2.76929 2.0522,-4.85225 4.0903,-5.93855 1.0983,-0.58538 5.7307,-5.21734 5.9619,-6.07591 0.095,-0.35499 0.07,-7.83479 0.3149,-28.77448 0.2255,-19.26325 0.4908,-41.96822 0.5898,-50.45549 0.099,-8.48727 0.1314,-16.12947 0.072,-16.98269 -0.2886,-4.15667 -1.5567,-7.88959 -3.911,-11.51231 -0.467,-0.7185 -5.4773,-7.47892 -11.1341,-15.02316 -6.5912,-7.84161 -13.7823,-16.80174 -11.9496,-14.30068 2.0691,1.99318 -4.7073,-5.45195 -7.9517,-0.19942 -1.5101,3.22062 -1.3966,4.45291 -1.1915,6.13898 0.056,0.45916 0.9914,2.55078 1.7441,3.88316 3.8109,6.74551 4.8368,8.35115 5.7631,10.68494 0.7338,1.84881 1.0007,3.21067 0.9959,5.08364 -0.01,2.62943 -0.7588,4.40697 -2.9411,6.95105 -3.3856,3.94665 -6.5034,5.65222 -13.4021,6.65417 -3.0172,0.43822 -5.0513,0.48909 -62.1663,1.55465 -69.95896,1.30519 -70.59702,1.31405 -71.67927,0.99565 -0.66598,-0.19593 -1.16243,-0.47601 -1.57504,-0.88865 -1.0922,-1.09219 -1.09994,-1.16645 -1.28595,-12.24633 -0.27393,-16.31773 -0.24856,-15.61974 -0.62838,-17.25047 -1.46067,-6.27015 -5.02508,-10.93728 -10.72461,-14.04259 -4.08645,-2.22641 -8.67709,-3.25567 -14.07412,-3.15547 -3.41245,0.0634 -3.5612,0.13002 -3.96626,1.77797 -0.25216,2.99306 -2.57129,4.50487 -3.76883,4.71887 -0.4797,0.0644 -1.05922,0.40729 -3.45759,-0.0887 -1.86379,-0.38545 -5.28454,-1.73517 -9.89515,-4.93224 -3.96915,-2.75227 -1.80164,-0.41809 -2.03745,1.1352 0.043,0.19017 -0.0963,10.3168 -0.10295,22.26184 -0.007,12.40539 -0.0827,22.97865 -0.17699,24.65757 -0.44805,7.98351 -1.74855,13.4991 -3.93408,16.68463 -1.36046,1.98295 -4.63211,4.95096 -7.76396,7.04345 -4.66742,3.11851 -9.40114,5.40233 -15.5984,7.52558 -7.01539,2.40361 -11.41443,4.76137 -14.33062,7.68084 -2.10995,2.11214 -2.83168,3.56457 -4.33875,8.73029 -1.39837,4.79286 -3.90844,15.19961 -3.73426,15.48155 0.17593,0.28456 1.05354,0.61403 3.1454,1.18079 5.50779,1.49231 8.05952,2.96463 24.87444,14.35258 3.36292,2.27766 7.04283,4.62428 9.4362,6.01748 1.60948,0.93695 12.35746,6.72897 18.41325,9.92284 17.70843,9.33953 31.59573,14.417213 42.41422,15.508054 2.74081,0.276358 5.35423,0.379428 12.95547,0.510967 9.60365,0.166183 112.07118,0.04493 139.42388,-0.164961 z" />

             <circle id="agent-1" class="agent agent-1" r="10"></circle>
             <circle id="agent-2" class="agent agent-2" r="10"></circle>
             <circle id="agent-3" class="agent agent-3" r="10"></circle>
             <circle id="agent-4" class="agent agent-4" r="10"></circle>

            <text id="track-label" x="985" y="-40" >Las Vegas Demo</text>
            <g id="lap-counter-group" transform="translate(1200, -300)"> <ellipse class="lap-oval-bg" rx="45" ry="25" />
              <text id="lap-count-text" class="lap-oval-text" x="0" y="0">0/50</text>
            </g>
            <text id="safety-car-message" x="985" y="-300" class="safety-car-text">SAFETY CAR DEPLOYED</text>
        </svg>

        <div class="leaderboard">
            <h2>Live Leaderboard</h2>
            <table>
                <thead>
                     <tr>
                         <th>Rank</th>
                         <th>Driver (Persona)</th>
                         <th>Strategy</th>
                         <th>Win Prob %</th>
                         <th>Heart Rate</th>
                     </tr>
                 </thead>
                 <tbody>
                     <tr>
                         <td>1</td>
                         <td>Agent 1 (You/Red)</td>
                         <td>2-Stop</td>
                         <td>65%</td>
                         <td>130 bpm</td>
                     </tr>
                     <tr>
                         <td>2</td>
                         <td>Agent 2 (White)</td>
                         <td>1-Stop Risk</td>
                         <td>20%</td>
                         <td>155 bpm</td>
                     </tr>
                     <tr>
                         <td>3</td>
                         <td>Agent 3 (Cyan)</td>
                         <td>1-Stop Safe</td>
                         <td>10%</td>
                         <td>125 bpm</td>
                     </tr>
                     <tr>
                         <td>4</td>
                         <td>Agent 4 (Yellow)</td>
                         <td>2-Stop</td>
                         <td>5%</td>
                         <td>160 bpm</td>
                     </tr>
                 </tbody>
            </table>
        </div>
    </div>

    <div class="controls">
        <h2>Chaos Engine</h2>
        <button id="rain-trigger">TRIGGER: HEAVY RAIN</button>
        <button id="crash-trigger">TRIGGER: CRASH - TURN 3</button>
    </div>

    <p class="explanation-note">
            Note: Strategy, Win Prob %, and Heart Rate values are simulated representations for this demo.
    </p>

    <div id="info-modal" class="modal-hidden"> <div class="modal-content">
        <span id="modal-close-button">&times;</span>
        <div class="strategy-overview">
            <h3>Simulation Factors</h3>
            <ul>
                <li><strong>AI Personas:</strong> Dynamic speeds & 'tire wear' based on Soft/Medium/Hard compounds.</li>
                <li><strong>Human Flaw:</strong> Autonomous 'Rookie Error' model (unforced crash).</li>
                <li><strong>Chaos Engine:</strong> Interactive triggers for 'Rain' (Safety Car & Pits) & 'Crashes' (DNF).</li>
                <li><strong>Driver State:</strong> Simulated live heart rate based on race pressure.</li>
                <li><strong>Strategy Logic:</strong> Tracks tire age and pit stops for all agents.</li>
            </ul>
        </div>
    </div>
   </div>

    <!-- ================= AI COMPANION WIDGET ================= -->
<div id="ai-companion-widget" class="ai-companion-closed">
  <button id="ai-companion-toggle" class="ai-toggle-btn">Aegis Companion</button>

  <div id="ai-companion-panel" class="ai-panel" aria-hidden="true">
    <div class="ai-panel-header">
      <h3>Aegis Race Strategist</h3>
      <button id="ai-companion-close" class="ai-close-btn">✕</button>
    </div>

    <div id="ai-companion-messages" class="ai-messages"></div>

    <form id="ai-companion-form" class="ai-form">
      <input id="ai-companion-input" 
             type="text" 
             placeholder="Ask strategy… e.g. 'Pit advice for Agent 1'" 
             required>
      <button type="submit">Send</button>
    </form>
  </div>
</div>
<!-- Agent tyre / param controls -->
<div class="agent-controls">
  <h3>Agent Settings</h3>
  <div id="agent-settings-list">
    <!-- JS will populate inputs for each agent -->
  </div>
</div>

<!-- Existing buttons are conceptual — add a Stop Rain + Pause button -->
<div class="controls-extra">
  <button id="stop-rain-btn" title="Stop rain effect">STOP RAIN</button>
  <button id="pause-race-btn" title="Pause/Resume race">PAUSE RACE</button>
</div>

<!-- ======================================================== -->


    <script src="script.js"></script>
</body>
</html>
